<Page x:Class="PhotoBooth.Pages.StartPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:fa="http://metro.mahapps.com/winfx/xaml/iconpacks"
      Title="Start Page"
      HorizontalAlignment="Stretch"
      VerticalAlignment="Stretch">
    
    <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <!-- Dark Background -->
        <Grid.Background>
            <SolidColorBrush Color="#0a0a0a"/>
        </Grid.Background>

        <!-- Ambient Background Glows - Golden Yellow -->
        <Canvas ClipToBounds="False">
            <!-- Center Glow -->
            <Ellipse Width="800" Height="800" 
                     Canvas.Left="300" Canvas.Top="100"
                     Opacity="0.12">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#EAB308" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="150"/>
                </Ellipse.Effect>
            </Ellipse>

            <!-- Secondary Glow -->
            <Ellipse Width="600" Height="600"
                     Canvas.Right="200" Canvas.Bottom="200"
                     Opacity="0.08">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#F59E0B" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="120"/>
                </Ellipse.Effect>
            </Ellipse>
        </Canvas>

        <!-- Main Content Layout -->
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header: Event Name Chip -->
            <Border Grid.Row="0"
                    Name="EventChip"
                    HorizontalAlignment="Center"
                    Margin="0,40,0,0"
                    Padding="18,10"
                    CornerRadius="24"
                    Background="#1A000000"
                    BorderBrush="#33FFFFFF"
                    BorderThickness="1"
                    Opacity="0">
                <StackPanel Orientation="Horizontal">
                    <fa:PackIconFontAwesome Kind="GiftSolid"
                                            Width="18" Height="18"
                                            Foreground="#EAB308"
                                            Margin="0,0,8,0"
                                            VerticalAlignment="Center"/>
                    <TextBlock Text="Sarah's 21st Birthday"
                              FontSize="14"
                              FontWeight="Bold"
                              Foreground="White"
                              VerticalAlignment="Center"/>
                              <fa:PackIconFontAwesome Kind="StarSolid"
                                            Width="18" Height="18"
                                            Foreground="#EAB308"
                                            Margin="0,0,8,0"
                                            VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- Main Content -->
            <StackPanel Grid.Row="1"
                       Name="HeroSection"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"
                       Opacity="0"
                       Margin="0,10,0,0">
                
                <!-- Mascot -->
                <Grid Width="260" Height="260" Margin="0,0,0,40">
                    <Ellipse Width="260" Height="260" Opacity="0.25">
                        <Ellipse.Fill>
                            <RadialGradientBrush>
                                <GradientStop Color="#EAB308" Offset="0"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </RadialGradientBrush>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Border Width="240" Height="240"
                            CornerRadius="120"
                            BorderBrush="#26FFFFFF"
                            BorderThickness="3"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center">
                        <Border.Effect>
                            <DropShadowEffect Color="#EAB308" BlurRadius="30" ShadowDepth="0" Opacity="0.3"/>
                        </Border.Effect>
                        <Border.Background>
                            <ImageBrush ImageSource="/Assets/logo.png" Stretch="UniformToFill"/>
                        </Border.Background>
                    </Border>
                </Grid>

                <!-- Heading & CTA -->
                <StackPanel>
                    <!-- Glowing text with layered approach -->
                    <Grid HorizontalAlignment="Center" Margin="0,0,0,12">
                        <!-- Glow layer -->
                        <TextBlock FontSize="80"
                                  FontWeight="Black"
                                  TextAlignment="Center">
                            <Run Text="Ready to " Foreground="White"/>
                            <Run Text="Pose?" Foreground="#EAB308"/>
                            <TextBlock.Effect>
                                <DropShadowEffect Color="#EAB308" BlurRadius="25" ShadowDepth="0" Opacity="0.4"/>
                            </TextBlock.Effect>
                        </TextBlock>
                        
                        <!-- Main text layer (for crisp text) -->
                        <TextBlock FontSize="80"
                                  FontWeight="Black"
                                  TextAlignment="Center">
                            <Run Text="Ready to " Foreground="White"/>
                            <Run Text="Pose?" Foreground="#EAB308"/>
                        </TextBlock>
                    </Grid>

                    <TextBlock Text="Touch the button below to start capturing memories!"
                              FontSize="18"
                              FontWeight="Medium"
                              Foreground="#808080"
                              HorizontalAlignment="Center"
                              TextAlignment="Center"
                              Margin="0,0,0,32"/>

                    <Button Name="StartButton"
                            Width="300"
                            Height="78"
                            Cursor="Hand"
                            Click="StartButton_Click"
                            HorizontalAlignment="Center">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="ButtonBorder"
                                        CornerRadius="40"
                                        BorderThickness="0">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#EAB308" Offset="0"/>
                                            <GradientStop Color="#D6AD70" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect x:Name="ButtonShadow"
                                                        Color="#EAB308" 
                                                        BlurRadius="35" 
                                                        ShadowDepth="0" 
                                                        Opacity="0.5"/>
                                    </Border.Effect>
                                    <Grid ClipToBounds="True">
                                        <!-- Shimmer -->
                                        <Border CornerRadius="40" ClipToBounds="True" Width="300" Height="78">
                                            <Rectangle x:Name="ShimmerRect" 
                                                      Width="120" 
                                                      Height="78" 
                                                      RadiusX="40"
                                                      RadiusY="40"
                                                      HorizontalAlignment="Left"
                                                      Margin="-120,0,0,0"
                                                      Opacity="0.3">
                                                <Rectangle.Fill>
                                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                                        <GradientStop Color="Transparent" Offset="0"/>
                                                        <GradientStop Color="White" Offset="0.5"/>
                                                        <GradientStop Color="Transparent" Offset="1"/>
                                                    </LinearGradientBrush>
                                                </Rectangle.Fill>
                                                <Rectangle.RenderTransform>
                                                    <TranslateTransform x:Name="ShimmerTransform"/>
                                                </Rectangle.RenderTransform>
                                            </Rectangle>
                                        </Border>

                        <StackPanel Orientation="Horizontal"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Margin="0,2,0,0">
                            <TextBlock Text="Let's Go" 
                                      FontFamily="Cormorant Garamond"
                                      FontSize="22" 
                                      FontWeight="SemiBold" 
                                      Foreground="#0A0A0A"
                                      VerticalAlignment="Center"
                                      Margin="0,0,12,0"/>
                            <fa:PackIconFontAwesome Kind="CameraSolid"
                                                    Width="24" Height="24"
                                                    Foreground="#0A0A0A"
                                                    VerticalAlignment="Center"/>
                        </StackPanel>
                                    </Grid>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Trigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ShimmerTransform"
                                                                   Storyboard.TargetProperty="X"
                                                                   From="-120" To="300" Duration="0:0:0.8"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.EnterActions>
                                        <Trigger.ExitActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="ShimmerTransform"
                                                                   Storyboard.TargetProperty="X"
                                                                   To="-120" Duration="0:0:0.2"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.ExitActions>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="ButtonBorder" Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="0.96" ScaleY="0.96" CenterX="150" CenterY="39"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </StackPanel>

            <!-- Footer -->
            <Grid Grid.Row="2" Margin="0,0,0,32">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                          Text="Powered by Magnificenz Tech Solutions"
                          FontSize="12"
                          FontWeight="Normal"
                          Foreground="#808080"
                          Opacity="1"
                          HorizontalAlignment="Left"
                          Margin="30,0,0,0"
                          VerticalAlignment="Center"/>

                <!-- Settings Icon with Border and Hover -->
                <Border Grid.Column="2"
                        Name="SettingsBorder"
                        Width="46"
                        Height="46"
                        CornerRadius="23"
                        Background="#1F1F1F"
                        BorderBrush="#26FFFFFF"
                        BorderThickness="1"
                        HorizontalAlignment="Right"
                        Margin="0,0,30,0"
                        Cursor="Hand"
                        Visibility="Visible"
                        MouseLeftButtonUp="SettingsBorder_MouseLeftButtonUp">
                    <fa:PackIconFontAwesome Name="SettingsIcon"
                                            Kind="GearSolid"
                                            Width="20" Height="20"
                                            Foreground="#808080"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                    <Border.RenderTransform>
                        <RotateTransform x:Name="SettingsRotate" CenterX="23" CenterY="23"/>
                    </Border.RenderTransform>
                    <Border.InputBindings>
                        <MouseBinding Gesture="LeftClick" Command="{x:Null}"/>
                    </Border.InputBindings>
                    <Border.Triggers>
                        <EventTrigger RoutedEvent="MouseEnter">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="SettingsRotate"
                                                   Storyboard.TargetProperty="Angle"
                                                   To="90" Duration="0:0:0.4"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                        <EventTrigger RoutedEvent="MouseLeave">
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetName="SettingsRotate"
                                                   Storyboard.TargetProperty="Angle"
                                                   To="0" Duration="0:0:0.4"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Border.Triggers>
                </Border>
                
                <!-- Sync Loader (NO Border, NO Hover) - Separate Container -->
                <Grid Grid.Column="2"
                      Name="SyncLoaderBorder"
                      Width="46"
                      Height="46"
                      HorizontalAlignment="Right"
                      Margin="0,0,30,0"
                      Visibility="Collapsed"
                     >
                    <!-- Spinning Gear Icon -->
                    <fa:PackIconFontAwesome Width="20" Height="20"
                                            Kind="GearSolid"
                                            Foreground="#EAB308"
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center">
                        <fa:PackIconFontAwesome.RenderTransform>
                            <RotateTransform x:Name="SyncLoaderRotate" CenterX="10" CenterY="10"/>
                        </fa:PackIconFontAwesome.RenderTransform>
                    </fa:PackIconFontAwesome>
                    
                    <!-- Progress Text -->
                    <TextBlock Name="SyncProgressText"
                               Text=""
                               FontSize="5.5"
                               Foreground="#EAB308"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Bottom"
                               Margin="0,0,0,4"
                               TextAlignment="Center"
                               FontWeight="Bold"/>
                </Grid>
            </Grid>
        </Grid>

        <!-- Loading Overlay (Preserved from original) -->
        <Border Name="LoadingPanel"
                Background="#F0000000"
                Visibility="Collapsed">
            <Border Width="500"
                    Height="300"
                    Background="#1A1A1A"
                    CornerRadius="30"
                    BorderBrush="#EAB308"
                    BorderThickness="3"
                    Padding="40">
                <Border.Effect>
                    <DropShadowEffect Color="#EAB308" BlurRadius="60" ShadowDepth="0" Opacity="0.5"/>
                </Border.Effect>
                
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="Loading Configuration..."
                              FontSize="32"
                              FontWeight="Bold"
                              Foreground="White"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,30">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#EAB308" BlurRadius="20" ShadowDepth="0" Opacity="0.6"/>
                        </TextBlock.Effect>
                    </TextBlock>
                    
                    <Grid Width="400" Height="30">
                        <Border Background="#30FFFFFF" 
                                CornerRadius="4" 
                                Height="8" 
                                VerticalAlignment="Center"/>
                        
                        <Rectangle x:Name="LoadingBox"
                                  Width="60"
                                  Height="20"
                                  RadiusX="4"
                                  RadiusY="4"
                                  Fill="#EAB308"
                                  HorizontalAlignment="Left">
                            <Rectangle.Effect>
                                <DropShadowEffect Color="#EAB308" BlurRadius="20" ShadowDepth="0" Opacity="0.9"/>
                            </Rectangle.Effect>
                            <Rectangle.RenderTransform>
                                <TranslateTransform x:Name="LoadingBoxTransform"/>
                            </Rectangle.RenderTransform>
                            <Rectangle.Triggers>
                                <EventTrigger RoutedEvent="Loaded">
                                    <BeginStoryboard>
                                        <Storyboard RepeatBehavior="Forever">
                                            <DoubleAnimation Storyboard.TargetName="LoadingBoxTransform"
                                                           Storyboard.TargetProperty="X"
                                                           From="0" To="340" Duration="0:0:1.2"
                                                           AutoReverse="True">
                                                <DoubleAnimation.EasingFunction>
                                                    <CubicEase EasingMode="EaseInOut"/>
                                                </DoubleAnimation.EasingFunction>
                                            </DoubleAnimation>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </EventTrigger>
                            </Rectangle.Triggers>
                        </Rectangle>
                    </Grid>
                    
                    <TextBlock Text="Please wait..."
                              FontSize="18"
                              Foreground="#C0FFFFFF"
                              HorizontalAlignment="Center"
                              Margin="0,20,0,0"/>
                </StackPanel>
            </Border>
        </Border>

        <!-- Error Overlay (Preserved from original) -->
        <Border Name="ErrorBorder"
                Background="#F0000000"
                Visibility="Collapsed">
            <Border Width="600"
                    MaxHeight="450"
                    Background="#252d1520"
                    CornerRadius="30"
                    BorderBrush="#E94560"
                    BorderThickness="3"
                    Padding="50">
                <Border.Effect>
                    <DropShadowEffect Color="#FF0000" BlurRadius="60" ShadowDepth="0" Opacity="0.7"/>
                </Border.Effect>

                <StackPanel>
                    <Border Width="100" Height="100"
                            Background="#E94560"
                            CornerRadius="50"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,30">
                        <TextBlock Text="⚠️" FontSize="60" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>

                    <TextBlock Text="Connection Error"
                              FontSize="40"
                              FontWeight="Black"
                              Foreground="White"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,20"/>
                    
                    <TextBlock Name="ErrorText"
                              Text="Unable to connect to the server"
                              FontSize="20"
                              Foreground="#FFD0D8"
                              TextWrapping="Wrap"
                              TextAlignment="Center"
                              Margin="0,0,0,30"/>

                    <Button Content="RETRY"
                            FontSize="28"
                            FontWeight="Bold"
                            Width="200"
                            Height="60"
                            Foreground="White"
                            Background="#E94560"
                            BorderThickness="0"
                            Cursor="Hand"
                            Click="StartButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}"
                                        CornerRadius="30">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FF0000" BlurRadius="25" ShadowDepth="0" Opacity="0.5"/>
                                    </Border.Effect>
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter Property="RenderTransform">
                                            <Setter.Value>
                                                <ScaleTransform ScaleX="0.97" ScaleY="0.97"/>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Border>
        </Border>
        
        <!-- Settings Popup -->
        <Popup Name="SettingsPopup"
               Placement="Custom"
               PlacementTarget="{Binding ElementName=SettingsBorder}"
               StaysOpen="False"
               AllowsTransparency="True"
               PopupAnimation="Fade">
            <Border Background="#E61A1A1A"
                    CornerRadius="8"
                    BorderBrush="#4DFFFFFF"
                    BorderThickness="1"
                    Padding="6,4"
                    MaxWidth="220">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" BlurRadius="20" ShadowDepth="0" Opacity="0.7"/>
                </Border.Effect>
                <Border.Resources>
                    <Style x:Key="SettingsMenuButtonStyle" TargetType="Button">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="#9CA3AF"/>
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontWeight" Value="Medium"/>
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="Margin" Value="0,2,0,0"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="HorizontalAlignment" Value="Stretch"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#2A2A2A"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Border.Resources>
                
                <StackPanel>
                    <Button Name="SyncConfigButton" 
                            Content="Config &amp; Frame Sync" 
                            Click="SyncConfigButton_Click"
                            Style="{StaticResource SettingsMenuButtonStyle}"/>
                    
                    <Button Name="SyncOfflineDataButton" 
                            Content="Sync Offline Data" 
                            Click="SyncOfflineDataButton_Click"
                            Style="{StaticResource SettingsMenuButtonStyle}"/>
                    
                    <Button Name="UploadOfflineFramesButton" 
                            Content="Upload Offline Frames" 
                            Click="UploadOfflineFramesButton_Click"
                            Style="{StaticResource SettingsMenuButtonStyle}"/>
                    
                    <Button Name="UpdateCodesButton" 
                            Content="Update Machine &amp; Site Code" 
                            Click="UpdateCodesButton_Click"
                            Style="{StaticResource SettingsMenuButtonStyle}"/>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</Page>
