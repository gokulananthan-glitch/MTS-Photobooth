<Page x:Class="PhotoBooth.Pages.PaymentPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:fa="http://metro.mahapps.com/winfx/xaml/iconpacks"
      xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
      Title="Payment Page">
    
    <Grid>
        <!-- Background -->
        <Grid.Background>
            <SolidColorBrush Color="#0a0a0a"/>
        </Grid.Background>
        
        <!-- Ambient Background Glows -->
        <Canvas ClipToBounds="False">
            <Ellipse Width="960" Height="960" 
                     Canvas.Left="240" Canvas.Top="180"
                     Opacity="0.1">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#EAB308" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="120"/>
                </Ellipse.Effect>
            </Ellipse>
            
            <Ellipse Width="800" Height="800"
                     Canvas.Right="200" Canvas.Bottom="180"
                     Opacity="0.1">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#D6AD70" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="120"/>
                </Ellipse.Effect>
            </Ellipse>
        </Canvas>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Background Content (will be blurred when modal is shown) -->
            <Grid Grid.Row="1" Name="BackgroundContent">
                <Grid.Effect>
                    <BlurEffect x:Name="BackgroundBlurEffect" Radius="0"/>
                </Grid.Effect>
            
            <!-- Main Content -->
            <StackPanel 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Center"
                       Margin="40">
                <!-- Heading -->
                <TextBlock Text="Complete Payment"
                          FontFamily="Cormorant Garamond"
                          FontSize="48"
                          FontWeight="Bold"
                          Foreground="#F8F5F0"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,40"/>
                
                <!-- Selected Style Card -->
                <Border Name="StyleCardBorder"
                       Width="320"
                       CornerRadius="12"
                       BorderBrush="#EAB308"
                       BorderThickness="2"
                       Padding="16"
                       Margin="0,0,0,35"
                       HorizontalAlignment="Center">
                    <Border.Background>
                        <SolidColorBrush Color="#EAB308" Opacity="0.2"/>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect Color="#EAB308" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                    </Border.Effect>
                    <StackPanel>
                        <!-- Style Preview Box -->
                        <Border Background="#0F0F0F"
                               CornerRadius="16"
                               Padding="16"
                               MaxHeight="240"
                               Margin="0,0,0,16">
                            <Viewbox Stretch="Uniform" Name="StylePreviewViewbox">
                                <!-- Preview content will be set in code-behind based on selected style -->
                            </Viewbox>
                        </Border>
                        
                        <!-- Style Name with Icon -->
                        <TextBlock Name="StyleNameText"
                                  Text="Dynamic Duo"
                                  FontFamily="Cormorant Garamond"
                                  FontSize="18"
                                  FontWeight="SemiBold"
                                  Foreground="#EAB308"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,6"/>
                        
                        <!-- Style Description -->
                        <TextBlock Name="StyleDescriptionText"
                                  Text="2 Frames · Vertical"
                                  FontSize="14"
                                  FontWeight="Normal"
                                  Foreground="#808080"
                                  HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- Number of Copies Section -->
                <StackPanel HorizontalAlignment="Center"
                           Margin="0,0,0,35">
                    <TextBlock Text="Number of Copies"
                              FontFamily="Cormorant Garamond"
                              FontSize="24"
                              FontWeight="SemiBold"
                          Foreground="#F8F5F0"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,20"/>
                
                <StackPanel Orientation="Horizontal"
                               HorizontalAlignment="Center">
                    <Button Name="DecreaseButton"
                               Width="56"
                               Height="56"
                               Content="−"
                               FontSize="32"
                           FontWeight="Bold"
                           Background="#EAB308"
                           Foreground="#0A0A0A"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="DecreaseButton_Click"
                               Margin="0,0,25,0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="28">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#D6AD70"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <Border Background="#1A1A1A"
                               CornerRadius="12"
                               Padding="20,12"
                               BorderBrush="#32312E"
                               BorderThickness="1"
                               MinWidth="80">
                    <TextBlock Name="CopyCountText"
                              Text="1"
                                      FontFamily="Cormorant Garamond"
                                      FontSize="36"
                              FontWeight="Bold"
                              Foreground="#F8F5F0"
                              VerticalAlignment="Center"
                                      HorizontalAlignment="Center"/>
                        </Border>
                    
                    <Button Name="IncreaseButton"
                               Width="56"
                               Height="56"
                           Content="+"
                               FontSize="28"
                           FontWeight="Bold"
                           Background="#EAB308"
                           Foreground="#0A0A0A"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="IncreaseButton_Click"
                               Margin="25,0,0,0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="28">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#D6AD70"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </StackPanel>
                
                <!-- Price Info -->
                <TextBlock Name="PriceInfoText"
                          Text="Just ₹200 to freeze the moment! Get your photo printed &amp; a digital copy too."
                          FontSize="18"
                          Foreground="#808080"
                          TextWrapping="Wrap"
                          HorizontalAlignment="Center"
                          TextAlignment="Center"
                          Margin="0,0,0,30"
                          MaxWidth="600"/>
                
                <!-- Buttons -->
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           Margin="0,30,0,0">
                    <Button Name="BackButton"
                           Content="Back"
                           MinWidth="160"
                           Height="65"
                           FontFamily="Cormorant Garamond"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Background="#1F1F1F"
                           Foreground="#F8F5F0"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="BackButton_Click"
                           Margin="0,0,20,0">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                   CornerRadius="30">
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#32312E"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <Button Name="PayButton"
                           Content="Pay ₹200"
                           MinWidth="200"
                           Height="65"
                           FontFamily="Cormorant Garamond"
                           FontSize="20"
                           FontWeight="SemiBold"
                           Background="#EAB308"
                           Foreground="#0A0A0A"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="PayButton_Click">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                   CornerRadius="30">
                                                <Border.Effect>
                                                    <DropShadowEffect Color="#EAB308" BlurRadius="28" ShadowDepth="0" Opacity="0.6"/>
                                                </Border.Effect>
                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#D6AD70"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </StackPanel>
            </Grid>
        </Grid>
        
        <!-- Payment Type Selection Modal -->
        <Border Name="PaymentModal"
               Background="#E6000000"
               Visibility="Collapsed"
               Panel.ZIndex="1000">
            <Border Background="#141414"
                   MinWidth="550"
                   MaxWidth="750"
                   MinHeight="500"
                   MaxHeight="650"
                   CornerRadius="20"
                   BorderBrush="#EAB308"
                   BorderThickness="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="20">
                <Border.Effect>
                    <DropShadowEffect Color="#EAB308" BlurRadius="40" ShadowDepth="0" Opacity="0.7"/>
                </Border.Effect>
                
                <Grid>
                    <!-- Animated Glow Effect -->
                    <Border CornerRadius="20" Background="#1AEAB308" Opacity="0.2">
                        <Border.Effect>
                            <BlurEffect Radius="20"/>
                </Border.Effect>
                    </Border>
                    
                    <!-- Content Grid -->
                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header with Icon and Close Button -->
                    <Grid Grid.Row="0" Margin="0,0,0,30">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Payment Icon -->
                        <Border Grid.Column="0"
                               Width="48"
                               Height="48"
                               CornerRadius="24"
                               Background="#1AEAB308"
                               Margin="0,0,15,0">
                            <fa:PackIconFontAwesome Kind="CreditCardSolid"
                                                   Width="24" Height="24"
                                                   Foreground="#EAB308"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                        </Border>
                        
                        <!-- Title -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Select Payment Method"
                                  FontFamily="Cormorant Garamond"
                                  FontSize="28"
                                  FontWeight="Bold"
                                  Foreground="#F8F5F0"
                                  VerticalAlignment="Center"/>
                            <TextBlock Text="Choose your preferred payment option"
                                      FontSize="12"
                                      Foreground="#808080"
                                      Margin="0,4,0,0"/>
                        </StackPanel>
                        
                        <!-- Close Button -->
                        <Button Grid.Column="2"
                               Name="CloseModalButton"
                               Width="36"
                               Height="36"
                               Background="#1F1F1F"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="CloseModalButton_Click"
                               Padding="0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="18">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#32312E"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="✕"
                                      FontSize="20"
                                      FontWeight="Bold"
                                      Foreground="#808080"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Button>
                    </Grid>
                    
                    <!-- Payment Options -->
                    <StackPanel Grid.Row="1"
                               Orientation="Horizontal"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Margin="0,20">
                        <!-- Cash Payment -->
                        <Button Name="CashPaymentButton"
                               MinWidth="200"
                               MinHeight="220"
                               MaxWidth="260"
                               MaxHeight="260"
                               Background="Transparent"
                               BorderBrush="#EAB308"
                               BorderThickness="2"
                               Cursor="Hand"
                               Click="CashPaymentButton_Click"
                               Margin="0,0,20,0"
                               Visibility="Collapsed">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="16">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#EAB308"/>
                                            <Setter Property="Background" Value="#1AEAB308"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Margin="20">
                                <!-- Cash Icon with colored background -->
                                <Border Width="90"
                                       Height="90"
                                       CornerRadius="45"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,20">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#EAB308" Offset="0"/>
                                            <GradientStop Color="#D6AD70" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                                    </Border.Effect>
                                    <fa:PackIconFontAwesome Kind="MoneyBillSolid"
                                                           Width="40" Height="40"
                                                           Foreground="#0A0A0A"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Pay Via Cash"
                                          FontFamily="Cormorant Garamond"
                                          FontSize="20"
                                          FontWeight="SemiBold"
                                          Foreground="#F8F5F0"
                                          HorizontalAlignment="Center"
                                          Margin="0,0,0,5"/>
                                <TextBlock Text="Hand over cash to front desk"
                                          FontSize="12"
                                          Foreground="#808080"
                                          HorizontalAlignment="Center"
                                          TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- UPI Payment -->
                        <Button Name="UpiPaymentButton"
                               MinWidth="200"
                               MinHeight="220"
                               MaxWidth="260"
                               MaxHeight="260"
                               Background="Transparent"
                               BorderBrush="#EAB308"
                               BorderThickness="2"
                               Cursor="Hand"
                               Click="UpiPaymentButton_Click"
                               Visibility="Collapsed">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="16">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#EAB308"/>
                                            <Setter Property="Background" Value="#1AEAB308"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel Margin="20">
                                <!-- UPI Icon with colored background -->
                                <Border Width="90"
                                       Height="90"
                                       CornerRadius="45"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,20">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                            <GradientStop Color="#EAB308" Offset="0"/>
                                            <GradientStop Color="#D6AD70" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <Border.Effect>
                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.5"/>
                                    </Border.Effect>
                                    <fa:PackIconFontAwesome Kind="MobileSolid"
                                                           Width="40" Height="40"
                                                           Foreground="#0A0A0A"
                                                           HorizontalAlignment="Center"
                                                           VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Pay Via UPI"
                                          FontFamily="Cormorant Garamond"
                                          FontSize="20"
                                          FontWeight="SemiBold"
                                          Foreground="#F8F5F0"
                                          HorizontalAlignment="Center"
                                          Margin="0,0,0,5"/>
                                <TextBlock Text="Quick &amp; secure online payment"
                                          FontSize="12"
                                          Foreground="#808080"
                                          HorizontalAlignment="Center"
                                          TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    
                    <!-- Loading Indicator -->
                    <StackPanel Name="LoadingIndicator"
                               Grid.Row="2"
                               HorizontalAlignment="Center"
                               Margin="0,20,0,0"
                               Visibility="Collapsed"
                               Orientation="Horizontal">
                        <TextBlock Text="Processing..."
                                  FontSize="16"
                                  Foreground="#808080"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Border>
        
        <!-- OTP Verification Modal -->
        <Border Name="OtpModal"
               Background="#E6000000"
               Visibility="Collapsed"
               Panel.ZIndex="1001">
            <Border Background="#141414"
                   MinWidth="380"
                   MaxWidth="480"
                   CornerRadius="20"
                   BorderBrush="#EAB308"
                   BorderThickness="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="20">
                <Border.Effect>
                    <DropShadowEffect Color="#EAB308" BlurRadius="40" ShadowDepth="0" Opacity="0.7"/>
                </Border.Effect>
                
                <Grid>
                    <!-- Animated Glow Effect -->
                    <Border CornerRadius="20" Background="#1AEAB308" Opacity="0.2">
                        <Border.Effect>
                            <BlurEffect Radius="20"/>
                </Border.Effect>
                    </Border>
                    
                    <!-- Content Grid -->
                    <Grid Margin="35">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header with Icon -->
                    <StackPanel Grid.Row="0"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,25">
                        <Border Width="56"
                               Height="56"
                               CornerRadius="28"
                               Background="#1AEAB308"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,15">
                            <fa:PackIconFontAwesome Kind="LockSolid"
                                                   Width="28" Height="28"
                                                   Foreground="#EAB308"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                        </Border>
                        <TextBlock Text="Enter OTP Code"
                                  FontFamily="Cormorant Garamond"
                                  FontSize="26"
                              FontWeight="Bold"
                              Foreground="#F8F5F0"
                              HorizontalAlignment="Center"/>
                    </StackPanel>
                    
                    <!-- OTP Input Label -->
                    <TextBlock Grid.Row="1"
                              Text="Please enter the code provided by the front desk:"
                              FontSize="14"
                              Foreground="#808080"
                              Margin="0,0,0,20"
                              HorizontalAlignment="Center"
                              TextWrapping="Wrap"
                              TextAlignment="Center"/>
                    
                    <!-- OTP TextBox -->
                    <Border Grid.Row="2"
                           CornerRadius="12"
                           BorderBrush="#EAB308"
                           BorderThickness="2"
                           Background="#0F0F0F"
                           Margin="0,0,0,30">
                        <Border.Effect>
                            <DropShadowEffect Color="#EAB308" BlurRadius="10" ShadowDepth="0" Opacity="0.3"/>
                        </Border.Effect>
                        <TextBox Name="OtpTextBox"
                                MinHeight="60"
                                FontFamily="Cormorant Garamond"
                                FontSize="24"
                                FontWeight="Bold"
                                Background="Transparent"
                                Foreground="#F8F5F0"
                                BorderThickness="0"
                                Padding="20,15"
                                TextChanged="OtpTextBox_TextChanged"
                                TextAlignment="Center"
                                MaxLength="6"
                                VerticalContentAlignment="Center"
                                CaretBrush="#EAB308"/>
                    </Border>
                    
                    <!-- Buttons -->
                    <StackPanel Grid.Row="3"
                               Orientation="Horizontal"
                               HorizontalAlignment="Center">
                        <Button Name="CancelOtpButton"
                               Content="Cancel"
                               MinWidth="110"
                               Height="50"
                               FontFamily="Cormorant Garamond"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Background="#1F1F1F"
                               Foreground="#F8F5F0"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="CancelOtpButton_Click"
                               Margin="0,0,12,0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="25">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#32312E"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <Button Name="VerifyOtpButton"
                               Content="Verify"
                               MinWidth="110"
                               Height="50"
                               FontFamily="Cormorant Garamond"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Background="#EAB308"
                               Foreground="#0A0A0A"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="VerifyOtpButton_Click"
                               IsEnabled="False">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="25">
                                                    <Border.Effect>
                                                        <DropShadowEffect Color="#EAB308" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>
                                                    </Border.Effect>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter Property="Background" Value="#32312E"/>
                                            <Setter Property="Foreground" Value="#808080"/>
                                        </Trigger>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#D6AD70"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Border>
        
        <!-- Razorpay Payment Modal -->
        <Border Name="RazorpayModal"
               Background="#E6000000"
               Visibility="Collapsed"
               Panel.ZIndex="1002">
            <Border Background="#141414"
                   MinWidth="400"
                   MaxWidth="900"
                   MinHeight="500"
                   MaxHeight="700"
                   Width="850"
                   Height="650"
                   CornerRadius="20"
                   BorderBrush="#EAB308"
                   BorderThickness="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="20">
                <Border.Effect>
                    <DropShadowEffect Color="#EAB308" BlurRadius="40" ShadowDepth="0" Opacity="0.7"/>
                </Border.Effect>
                
                <Grid>
                    <!-- Animated Glow Effect -->
                    <Border CornerRadius="20" Background="#1AEAB308" Opacity="0.2">
                        <Border.Effect>
                            <BlurEffect Radius="20"/>
                        </Border.Effect>
                    </Border>
                    
                    <!-- Content Grid -->
                    <Grid Margin="25">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header with Icon and Close Button -->
                    <Grid Grid.Row="0" Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Payment Icon -->
                        <Border Grid.Column="0"
                               Width="48"
                               Height="48"
                               CornerRadius="24"
                               Background="#1AEAB308"
                               Margin="0,0,15,0">
                            <fa:PackIconFontAwesome Kind="CreditCardSolid"
                                                   Width="24" Height="24"
                                                   Foreground="#EAB308"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center"/>
                        </Border>
                        
                        <!-- Title -->
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Complete Payment via UPI"
                                      FontFamily="Cormorant Garamond"
                                      FontSize="26"
                                      FontWeight="Bold"
                                      Foreground="#F8F5F0"
                                      VerticalAlignment="Center"/>
                            <TextBlock Text="Secure payment powered by Razorpay"
                                      FontSize="12"
                                      Foreground="#808080"
                                      Margin="0,4,0,0"/>
                        </StackPanel>
                        
                        <!-- Close Button -->
                        <Button Grid.Column="2"
                               Name="CloseRazorpayModalButton"
                               Width="36"
                               Height="36"
                               Background="#1F1F1F"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="CloseRazorpayModalButton_Click"
                               Padding="0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="18">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#32312E"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <TextBlock Text="✕"
                                      FontSize="20"
                                      FontWeight="Bold"
                                      Foreground="#808080"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Button>
                    </Grid>
                    
                    <!-- WebView2 for Razorpay Checkout -->
                    <Border Grid.Row="1"
                           Background="White"
                           CornerRadius="12"
                           BorderBrush="#32312E"
                           BorderThickness="2">
                        <Border.Effect>
                            <DropShadowEffect Color="#000000" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
                        </Border.Effect>
                        <wv2:WebView2 Name="RazorpayWebView"
                                     HorizontalAlignment="Stretch"
                                     VerticalAlignment="Stretch"/>
                    </Border>
                    
                    <!-- Status Text with Icon -->
                    <StackPanel Grid.Row="2"
                              Name="RazorpayStatusPanel"
                              Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Margin="0,20,0,0"
                              Visibility="Collapsed">
                        <fa:PackIconFontAwesome Kind="SpinnerSolid"
                                               Width="16" Height="16"
                                               Foreground="#EAB308"
                                               Margin="0,0,8,0"
                                               VerticalAlignment="Center"/>
                        <TextBlock Name="RazorpayStatusText"
                                  Text="Processing payment..."
                                  FontSize="14"
                                  Foreground="#808080"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Page>

