<Page x:Class="PhotoBooth.Pages.PaymentPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:fa="http://metro.mahapps.com/winfx/xaml/iconpacks"
      Title="Payment Page">
    
    <Grid>
        <!-- Background -->
        <Grid.Background>
            <SolidColorBrush Color="#221017"/>
        </Grid.Background>
        
        <!-- Ambient Background Glows -->
        <Canvas ClipToBounds="False">
            <Ellipse Width="1000" Height="1000" 
                     Canvas.Left="-300" Canvas.Top="-200"
                     Opacity="0.2">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#f4257b" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="120"/>
                </Ellipse.Effect>
            </Ellipse>
            
            <Ellipse Width="1200" Height="1200"
                     Canvas.Right="-400" Canvas.Bottom="-400"
                     Opacity="0.1">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#a855f7" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Effect>
                    <BlurEffect Radius="150"/>
                </Ellipse.Effect>
            </Ellipse>
        </Canvas>
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Background Content (will be blurred when modal is shown) -->
            <Grid Grid.Row="1" Name="BackgroundContent">
                <Grid.Effect>
                    <BlurEffect x:Name="BackgroundBlurEffect" Radius="0"/>
                </Grid.Effect>
            
            <!-- Main Content -->
            <StackPanel 
                       VerticalAlignment="Center" 
                       HorizontalAlignment="Center"
                       Margin="40">
                <!-- Heading -->
                <TextBlock Text="Complete Payment"
                          FontSize="48"
                          FontWeight="Bold"
                          Foreground="White"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,40"/>
                
                <!-- Selected Style Card -->
                <Border Name="StyleCardBorder"
                       Width="280"
                       Background="#1AFFFFFF"
                       CornerRadius="20"
                       BorderBrush="#f4257b"
                       BorderThickness="2"
                       Padding="20"
                       Margin="0,0,0,30"
                       HorizontalAlignment="Center">
                    <Border.Effect>
                        <DropShadowEffect Color="#f4257b" BlurRadius="20" ShadowDepth="0" Opacity="0.6"/>
                    </Border.Effect>
                    <StackPanel>
                        <!-- Style Preview Box -->
                        <Border Background="#1a0c12"
                               CornerRadius="16"
                               Padding="20"
                               MaxHeight="200"
                               Margin="0,0,0,16">
                            <Viewbox Stretch="Uniform" Name="StylePreviewViewbox">
                                <!-- Preview content will be set in code-behind based on selected style -->
                            </Viewbox>
                        </Border>
                        
                        <!-- Style Name -->
                        <TextBlock Name="StyleNameText"
                                  Text="Dynamic Duo"
                                  FontSize="22"
                                  FontWeight="Bold"
                                  Foreground="#f4257b"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,6"/>
                        
                        <!-- Style Description -->
                        <TextBlock Name="StyleDescriptionText"
                                  Text="2 Frames â€¢ Vertical"
                                  FontSize="14"
                                  FontWeight="Medium"
                                  Foreground="#80FFFFFF"
                                  HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>
                
                <!-- Number of Copies -->
                <TextBlock Text="No of copy"
                          FontSize="24"
                          Foreground="White"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,20"/>
                
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,30">
                    <Button Name="DecreaseButton"
                           Width="50"
                           Height="50"
                           Content="-"
                           FontSize="24"
                           FontWeight="Bold"
                           Background="#f4257b"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="DecreaseButton_Click"
                           Margin="0,0,20,0"/>
                    
                    <TextBlock Name="CopyCountText"
                              Text="1"
                              FontSize="32"
                              FontWeight="Bold"
                              Foreground="White"
                              VerticalAlignment="Center"
                              Width="60"
                              TextAlignment="Center"/>
                    
                    <Button Name="IncreaseButton"
                           Width="50"
                           Height="50"
                           Content="+"
                           FontSize="24"
                           FontWeight="Bold"
                           Background="#f4257b"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="IncreaseButton_Click"
                           Margin="20,0,0,0"/>
                </StackPanel>
                
                <!-- Price Info -->
                <TextBlock Name="PriceInfoText"
                          Text="Just â‚¹200 to freeze the moment! Get your photo printed &amp; a digital copy too."
                          FontSize="20"
                          Foreground="White"
                          TextWrapping="Wrap"
                          HorizontalAlignment="Center"
                          TextAlignment="Center"
                          Margin="0,0,0,30"
                          MaxWidth="600"/>
                
                <!-- Buttons -->
                <StackPanel Orientation="Horizontal"
                           HorizontalAlignment="Center"
                           Margin="0,20,0,0">
                    <Button Name="BackButton"
                           Content="Back"
                           Width="150"
                           Height="60"
                           FontSize="18"
                           Background="#333"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="BackButton_Click"
                           Margin="0,0,20,0"/>
                    
                    <Button Name="PayButton"
                           Content="Pay â‚¹200"
                           Width="150"
                           Height="60"
                           FontSize="18"
                           FontWeight="Bold"
                           Background="#f4257b"
                           Foreground="White"
                           BorderThickness="0"
                           Cursor="Hand"
                           Click="PayButton_Click"/>
                </StackPanel>
            </StackPanel>
            </Grid>
        </Grid>
        
        <!-- Payment Type Selection Modal -->
        <Border Name="PaymentModal"
               Background="#CC000000"
               Visibility="Collapsed"
               Panel.ZIndex="1000">
            <Border Background="#221017"
                   MinWidth="500"
                   MaxWidth="700"
                   MinHeight="450"
                   MaxHeight="600"
                   CornerRadius="20"
                   BorderBrush="#f4257b"
                   BorderThickness="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="20">
                <Border.Effect>
                    <DropShadowEffect Color="#f4257b" BlurRadius="30" ShadowDepth="0" Opacity="0.8"/>
                </Border.Effect>
                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Header with Close Button -->
                    <Grid Grid.Row="0" Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Title -->
                        <TextBlock Grid.Column="0"
                                  Text="Select Payment Method"
                                  FontSize="28"
                                  FontWeight="Bold"
                                  Foreground="White"
                                  VerticalAlignment="Center"/>
                        
                        <!-- Close Button -->
                        <Button Grid.Column="1"
                               Name="CloseModalButton"
                               Width="32"
                               Height="32"
                               Background="Transparent"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="CloseModalButton_Click"
                               Padding="0">
                            <TextBlock Text="âœ•"
                                      FontSize="24"
                                      FontWeight="Bold"
                                      Foreground="#CCFFFFFF"
                                      HorizontalAlignment="Center"
                                      VerticalAlignment="Center"/>
                        </Button>
                    </Grid>
                    
                    <!-- Payment Options -->
                    <StackPanel Grid.Row="1"
                               Orientation="Horizontal"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Margin="0,20">
                        <!-- Cash Payment -->
                        <Button Name="CashPaymentButton"
                               MinWidth="180"
                               MinHeight="180"
                               MaxWidth="220"
                               MaxHeight="220"
                               Background="Transparent"
                               BorderBrush="#f4257b"
                               BorderThickness="3"
                               Cursor="Hand"
                               Click="CashPaymentButton_Click"
                               Margin="0,0,15,0"
                               Visibility="Collapsed">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="15">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#ff4d7b"/>
                                            <Setter Property="Background" Value="#1Af4257b"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel>
                                <!-- Cash Icon with colored background -->
                                <Border Width="80"
                                       Height="80"
                                       CornerRadius="40"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,15">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#FFD700" Offset="0"/>
                                            <GradientStop Color="#FFA500" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <TextBlock Text="ðŸ’°"
                                              FontSize="45"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Pay Via Cash"
                                          FontSize="18"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                        
                        <!-- UPI Payment -->
                        <Button Name="UpiPaymentButton"
                               MinWidth="180"
                               MinHeight="180"
                               MaxWidth="220"
                               MaxHeight="220"
                               Background="Transparent"
                               BorderBrush="#f4257b"
                               BorderThickness="3"
                               Cursor="Hand"
                               Click="UpiPaymentButton_Click"
                               Visibility="Collapsed">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       BorderBrush="{TemplateBinding BorderBrush}"
                                                       BorderThickness="{TemplateBinding BorderThickness}"
                                                       CornerRadius="15">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="BorderBrush" Value="#ff4d7b"/>
                                            <Setter Property="Background" Value="#1Af4257b"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                            <StackPanel>
                                <!-- UPI Icon with colored background -->
                                <Border Width="80"
                                       Height="80"
                                       CornerRadius="40"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,15">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#4A90E2" Offset="0"/>
                                            <GradientStop Color="#357ABD" Offset="1"/>
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <TextBlock Text="ðŸ“±"
                                              FontSize="45"
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                                </Border>
                                <TextBlock Text="Pay Via UPI"
                                          FontSize="18"
                                          FontWeight="Bold"
                                          Foreground="White"
                                          HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    
                    <!-- Loading Indicator -->
                    <StackPanel Name="LoadingIndicator"
                               Grid.Row="2"
                               HorizontalAlignment="Center"
                               Margin="0,20,0,0"
                               Visibility="Collapsed"
                               Orientation="Horizontal">
                        <TextBlock Text="Processing..."
                                  FontSize="16"
                                  Foreground="#80FFFFFF"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>
        
        <!-- OTP Verification Modal -->
        <Border Name="OtpModal"
               Background="#CC000000"
               Visibility="Collapsed"
               Panel.ZIndex="1001">
            <Border Background="#221017"
                   MinWidth="350"
                   MaxWidth="450"
                   CornerRadius="20"
                   BorderBrush="#f4257b"
                   BorderThickness="2"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"
                   Margin="20">
                <Border.Effect>
                    <DropShadowEffect Color="#f4257b" BlurRadius="30" ShadowDepth="0" Opacity="0.8"/>
                </Border.Effect>
                <Grid Margin="30">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Title -->
                    <TextBlock Grid.Row="0"
                              Text="Enter OTP Code"
                              FontSize="24"
                              FontWeight="Bold"
                              Foreground="White"
                              Margin="0,0,0,20"
                              HorizontalAlignment="Center"/>
                    
                    <!-- OTP Input Label -->
                    <TextBlock Grid.Row="1"
                              Text="Please enter the code provided:"
                              FontSize="14"
                              Foreground="#CCFFFFFF"
                              Margin="0,0,0,10"
                              HorizontalAlignment="Center"
                              TextWrapping="Wrap"/>
                    
                    <!-- OTP TextBox -->
                    <Border Grid.Row="2"
                           CornerRadius="8"
                           BorderBrush="#f4257b"
                           BorderThickness="2"
                           Background="#1a0d12"
                           Margin="0,0,0,25">
                        <TextBox Name="OtpTextBox"
                                MinHeight="50"
                                FontSize="22"
                                FontWeight="Bold"
                                Background="Transparent"
                                Foreground="White"
                                BorderThickness="0"
                                Padding="15,12"
                                TextChanged="OtpTextBox_TextChanged"
                                TextAlignment="Center"
                                MaxLength="6"
                                VerticalContentAlignment="Center"/>
                    </Border>
                    
                    <!-- Buttons -->
                    <StackPanel Grid.Row="3"
                               Orientation="Horizontal"
                               HorizontalAlignment="Center">
                        <Button Name="CancelOtpButton"
                               Content="Cancel"
                               MinWidth="110"
                               Height="50"
                               FontSize="16"
                               Background="#333333"
                               Foreground="White"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="CancelOtpButton_Click"
                               Margin="0,0,12,0">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="10">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>
                        
                        <Button Name="VerifyOtpButton"
                               Content="Verify"
                               MinWidth="110"
                               Height="50"
                               FontSize="16"
                               FontWeight="Bold"
                               Background="#f4257b"
                               Foreground="White"
                               BorderThickness="0"
                               Cursor="Hand"
                               Click="VerifyOtpButton_Click"
                               IsEnabled="False">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                       CornerRadius="10">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsEnabled" Value="False">
                                            <Setter Property="Background" Value="#804f2a4a"/>
                                            <Setter Property="Foreground" Value="#80FFFFFF"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>
        </Border>
    </Grid>
</Page>

